<!DOCTYPE html>
<html>
    <head>
        <title>NW.js Chapter2 Native UI APIs</title>
    </head>
    <body>
        <!-- script type="text/javascript" src=""-->
        <script>
            var fs = require("fs");
            var gui = require("nw.gui");
            
            var currentWindow = gui.Window.get();

            currentWindow.on('minimize',function(){
                alert('Minimizing Window');
            });

            var markdown = require("markdown").markdown, div = document.createElement("div"), content = "#Hello World!\n" + "We are using **io.js** " + "version *" + process.version + "*";
            div.innerHTML = markdown.toHTML(content);
            document.body.appendChild(div);

            var path = require("path");
            
            var settings = {
                'show_sidebar' : true,
                'show_icons'   : false
            };
            
            console.log(gui.App.dataPath);
            
            var manifestData = gui.App.manifest;
            alert(manifestData.name);

            
            var settingsFilename = path.join(gui.App.dataPath,'mySetting.json');
            // write setting file
            fs.writeFile(settingsFilename,JSON.stringify(settings));
            
            // read settings file
            fs.readFile(settingsFilename,'utf8',function(err,data){
                var saveSettings = JSON.parse(data);
                console.log(saveSettings);
            });
  
        </script>
    </body>
</html>